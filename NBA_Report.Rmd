---
title: "NBA_Report"
author: "Rita Wang, Teddy Guo, Sara Baji, Camila Diaz"
date: "`r Sys.Date()`"
params:
  data_path: "data/raw_nba_2025-10-30.csv"
  codebook_path: "nba_codebook.xlsx"
  top_n: !r as.integer(Sys.getenv("TOP_N", "10"))
  cutoff_date: "October 30, 2025"
  outcome_label: "points per 36 minutes"
fontsize: 11pt
geometry: margin=1in
output:
  html_document:
    toc: true
    toc_float: true
    number_sections: true
    code_folding: "show"
    theme: cosmo
    highlight: tango
    df_print: paged
    self_contained: true 
---

```{r, load-packages, include=FALSE}
library(dplyr)
library(tidyverse)
library(here)
```

```{r, setup, include=FALSE}
knitr::opts_knit$set(root.dir = here::here())
data_path <- here::here(params$data_path)
codebook_path <- here::here(params$codebook_path)
```

# Project overview

This project analyzes NBA player performance data sourced from [Basketball Reference](https://www.basketball-reference.com/leagues/NBA_2026_per_minute.html), focusing on **per-36-minute statistics** to compare players on an equal playing-time basis as of `r params$cutoff_date`. The goal is to rank the top `r params$top_n` players using key metrics such as points, assists, rebounds, and efficiency, then summarize overall trends through tables and visualizations. Our primary outcome is `r params$outcome_label`. Subsequent sections will expand on these analyses and introduce a simple predictive model to examine how shooting, rebounding, and passing metrics collectively explain a player's overall scoring output.

# Data Description
```{r, read-data, message=FALSE, warning=FALSE}
nba_data <- readr::read_csv(data_path)
head(nba_data)
```

Each row represents one player's averaged performance metrics.

Key variables include:

- **Points, assists, and rebounds per 36 minutes** — indicators of overall contribution.  
- **Field goal, 3-point, and free throw percentages** — measures of shooting efficiency.  
- **Blocks, steals, turnovers, and fouls** — indicators of defensive and possession-related performance.  
- **Effective field goal percentage** — a combined efficiency measure that adjusts for the added value of 3-point shots.  

These variables allow for ranking players, summarizing league-wide performance patterns, and later building a model to explore how shooting, rebounding, and passing relate to overall scoring output.

## Summary Statistics
```{r, summary-stats, message=FALSE, warning=FALSE}
table1<- readRDS(here::here("output/table1.rds"))
table1
```

Table 1 summarizes overall player performance across 422 NBA athletes. The averages show that players typically contribute around **15 points**, **3 assists**, and **6 rebounds**, though the wide interquartile ranges highlight large variation in offensive roles and productivity. Shooting efficiency is generally consistent league-wide, with **field-goal accuracy near 0.46**, **three-point accuracy around 0.32**, and **free-throw accuracy near 0.76**, resulting in an **effective field-goal rate of roughly 0.54**. These numbers suggest that while elite scorers push the upper range of these metrics, most players maintain balanced scoring efficiency. 


## Graphical Summaries - by Camila Diaz

### Histogram

This histogram shows the distribution of points per 36 minutes.
```{r, histogram, echo=TRUE, message=FALSE, warning=FALSE}
#| fig.align="center"
knitr::include_graphics(here::here("output/histogram_pts.png"))
```

### Scatter plot

This plot shows how players’ scoring relates to their effective field goal percentage.
```{r, scatter-1, echo=TRUE, message=FALSE, warning=FALSE}
#| fig.align="center"
knitr::include_graphics(here::here("output/scatter_pts_efg.png"))
```

This plot shows how players’ scoring relates to their assists.
```{r, scatter-2, echo=TRUE, message=FALSE, warning=FALSE}
#| fig.align="center"
knitr::include_graphics(here::here("output/scatter_pts_ast.png"))
```

### Interpretation

The histogram shows most players score around 15 points per 36 minutes. The scatter plots indicate that higher points are generally linked to better shooting and more assists. Points per 36 minutes have a weak positive correlation with both effective field goal percentage (r = 0.49) and assists (r = 0.35)." Overall, scoring is influenced more by shooting efficiency than by assists.

# Player Ranking & Performance Summary - By Teddy Guo

We next rank the Top `r params$top_n` players and interpret `r params$outcome_label` as of `r params$cutoff_date`.
```{r, player-ranking, echo=TRUE, message=FALSE, warning=FALSE}
#|fig.align = "center",
#| out.width = "600px"
knitr::include_graphics(here::here("output/ranking_plot.png"))
```


## Interpretation

The heatmap above provides a comparative view of the top `r params$top_n` NBA players’ performance across seven per–36-minute metrics: points (PTS), assists (AST), total rebounds (TRB), field goal percentage (FG%), three-point percentage (3P%), free throw percentage (FT%), and effective field goal percentage (eFG%).

Each cell’s shading represents the player’s **relative performance** after rescaling all metrics between 0 and 1. Darker colors indicate stronger performance compared to others, while **gray cells indicate missing or unavailable data**. Players are ordered by their original **points per 36 minutes (PTS)** as of `r params$cutoff_date`.

From the visualization, **Pat Connaughton (Charlotte Hornets)** leads in **points per 36 minutes** and maintains competitive efficiency metrics. **Tolu Smith (Detroit Pistons)** and **Luka Dončić (Lakers)** also show balanced strengths across multiple categories. In contrast, players such as **Anthony Gill (Washington Wizards)** and **Myron Gardner (Miami Heat)** exhibit weaker or less consistent performance across the selected metrics.

Overall, the figure highlights contrasts between the top 10 players who maintain balanced efficiency across multiple performance metrics and those who excel primarily in one or two specialized areas.

# Modeling overview - by Sara Baji

Building on the descriptive summaries above, we will use a linear regression model to evaluate how different aspects of player performance contribute to scoring efficiency. Specifically, we examine how shooting accuracy (field-goal and three-point percentage), rebounding, and passing metrics together explain variation in points per 36 minutes. 

## Regression Modeling
```{r, regression-model, echo=TRUE, message=FALSE, warning=FALSE}
coef_tab <- readRDS(here::here("output", "reg_coef_table.rds"))
fit_tab  <- readRDS(here::here("output", "reg_fit_stats.rds"))

coef_tab %>% 
  knitr::kable(digits = 3, caption = "Regression coefficients for predicting points per 36 minutes.")

fit_tab %>% 
  select(r.squared, adj.r.squared, AIC, BIC) %>% 
  knitr::kable(digits = 3, caption = "Model fit statistics.")
```

```{r, regression-plot-colored, echo=TRUE, message=FALSE, warning=FALSE}
knitr::include_graphics(here::here("output", "reg_pred_vs_actual.png"))
```

## Interpretation

The linear regression model explained approximately 41% of the variation in players’ points per 36 minutes (R² = 0.41, Adjusted R² = 0.41). Field-goal percentage was the strongest predictor of scoring (β = 23.24, SE = 2.56, p < 0.001), followed by assists (β = 0.72, SE = 0.12, p < 0.001) and three-point percentage (β = 5.20, SE = 2.03, p = 0.011). Total rebounds showed a smaller, marginally significant positive effect (β = 0.15, SE = 0.09, p = 0.082). These findings indicate that players who shoot efficiently and contribute through playmaking tend to score more points per 36 minutes, while rebounding provides a weaker but still positive contribution to scoring performance.


# Summary of findings 

Overall, this snapshot of NBA per-36-minute statistics suggests that high scorers tend to pair **efficient shooting** with at least moderate playmaking rather than relying on volume alone.

From the descriptive table and exploratory plots, we saw that:
- Points per 36 minutes vary widely across players, with a small group of high-end scorers in the right tail of the distribution.
- Points per 36 minutes increase with effective field goal percentage, indicating that efficient shot selection is strongly linked to scoring output.
- There is also a positive, though more modest, association between assists per 36 minutes and scoring, consistent with the idea that players who create offense for others are often in positions to score themselves.

The ranking heatmap highlighted that the top scorers are typically strong in **multiple** dimension, scoring, 3-point shooting, and free-throw accuracy, rather than excelling in only one metric. The regression model further supported this pattern: better shooting percentages and higher assist rates were associated with more points per 36 minutes, whereas rebounds played a comparatively smaller role in predicting scoring after accounting for shooting and playmaking.

Taken together, among this group of NBA players, those who combine efficient shooting with active involvement in the offense (via assists and other creation-related stats) are generally the most productive scorers on a per-36-minute basis. This interpretation is specific to a single-date snapshot and assumes that per-36-minute scaling reasonably approximates what players would do with more playing time.